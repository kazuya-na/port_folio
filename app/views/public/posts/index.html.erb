<div class="container p-5">
  <div class="row">
    <div class="col-12 text-center">
      <h1>投稿一覧</h1>
      <%= render 'public/searches/search', range: @range %>
    </div>
    <div class="col">
      <% if current_end_user.nick_name != "guestuser" %>
        <%= link_to '新規投稿', new_post_path, class:'btn btn-primary' %>
      <% end %>
    </div>
  </div>
  <table class='table'>
    <thead>
      <tr>
        <th>タイトル</th>
        <th>本文</th>
        <th>投稿者</th>
        <th colspan="4"></th>
      </tr>
    </thead>
    <tbody>
      <% @posts.each do |post| %>
        <tr>
          <td><%= link_to post.title, post_path(post.id) %></td>
          <td><%= post.body.truncate(24, omission: '...') %></td>
          <td><%= post.end_user.nick_name %></td>
          <td class=<%= "favorite-#{post.id}" %> >
           <%= render "public/favorites/favorite-btn", post: post %>
          </td>
          <td>
            <% if post.end_user == current_end_user %>
              <%= link_to post_path(post), method: :delete, data: { confirm: '本当に消しますか？' }, class: "btn btn-sm btn-outline-danger", remote: true do %>
                <i class="fa-solid fa-trash-can"></i> 削除
              <% end %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>